:original_name: opengauss_01_0022.html

.. _opengauss_01_0022:

Step 1: Create a DB Instance
============================

Scenarios
---------

This section describes how to create a DB instance on the management console.

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner and select a region and a project.

#. Click **Service List**. Under **Database**, click **GaussDB**.

#. In the navigation pane on the left, choose **GaussDB(openGauss)** > **Instance Management**.

#. On the **Instance Management** page, click **Create DB Instance**.

#. On the displayed page, configure information about your DB instance. Then, click **Next**.

   .. table:: **Table 1** Basic information

      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                  |
      +===================================+==============================================================================================================================================================================================================================================================================+
      | Region                            | A region where the tenant is located. You can change it on the creation page, or go back to the **Instance Management** page and change it in the upper left corner.                                                                                                         |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   | .. note::                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   |    Products in different regions cannot communicate with each other over a private network. Once the DB instance is created, you cannot change the region.                                                                                                                   |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Instance Name                  | Starts with a letter and consist of 4 to 64 characters. Only letters, digits, hyphens (-), and underscores (_) are allowed.                                                                                                                                                  |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Engine                         | GaussDB(openGauss)                                                                                                                                                                                                                                                           |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Engine Version                 | The DB engine version can differ in different regions                                                                                                                                                                                                                        |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Instance Type                  | **Distributed**: A DB instance supports capability expansion through shards to allow high concurrent access to massive volumes of data.                                                                                                                                      |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Deployment Model                  | **Independent**: Database components are deployed on different nodes. A DB instance contains up to 256 shards in the distributed instance type. This model is suitable where high reliability and stability are required and the DB instance scale is large.                 |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Consistency Model                 | -  **Strong consistency**: When an application updates data, you can query all data that has been successfully submitted, but performance is affected.                                                                                                                       |
      |                                   | -  **Eventual consistency**: When an application updates data, you may or may not be able to query the updated data (because data may have not yet converged), but performance is high.                                                                                      |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Failover Priority                 | -  **Reliability**: Data consistency is given priority during a failover. This is recommended for users with highest priority for data consistency.                                                                                                                          |
      |                                   | -  **Availability**: Database availability is given priority during a failover. This is recommended for users who require their databases to provide uninterrupted online services.                                                                                          |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   |    .. note::                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   |       In availability scenarios, exercise caution when changing the following database parameters:                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   |       -  **recovery_time_target**: If this parameter is incorrectly changed, the DB instance will undergo forcible failovers frequently. To change this parameter, contact technical support.                                                                                |
      |                                   |       -  **audit_system_object**: If this parameter is incorrectly changed, DDL audit logs will be lost. To change this parameter, contact technical support.                                                                                                                |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Replica Sets                      | Number of Data Nodes (DNs) under each shard. There is one primary node in each shard. For example, if there are three replicas, there are one primary and two standby nodes under each shard.                                                                                |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Shards                            | A shard is a group of DN replica sets. The number of DN under a shard depends on the value of **Replica Sets**. In the current version, each shard contains three replica sets. The value of shards ranges from 1 to 9, and can be expanded to 256.                          |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Coordinating Nodes                | Number of Coordinator Nodes (CNs). CNs receive access requests from applications, breaks down and schedule the tasks to DNs under each shard for parallel execution, and then return execution results to clients. The value ranges from 1 to 9, and can be expanded to 256. |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   | .. important::                                                                                                                                                                                                                                                               |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   |    NOTICE:                                                                                                                                                                                                                                                                   |
      |                                   |    The number of CNs must be less than or equal to twice the number of shards.                                                                                                                                                                                               |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | AZ                                | A DB instance can be deployed in one AZ or three AZs.                                                                                                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                              |
      |                                   | An availability zone (AZ) is a physical region where resources use independent power supply and networks. AZs are physically isolated but interconnected over a private network.                                                                                             |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Time Zone                         | You need to select a time zone for your DB instances according to the region hosting your DB instance. It can be selected during instance creation.                                                                                                                          |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 2** Instance class and storage space

      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                              |
      +===================================+==========================================================================================================================================================+
      | Instance Class                    | Refers to the CPU and memory of a DB instance. Different instance classes also correspond to different numbers of database connections and maximum IOPS. |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Storage Type                      | Determines the instance read/write speed. The higher the maximum throughput is, the higher the instance read/write speed can be.                         |
      |                                   |                                                                                                                                                          |
      |                                   | **Ultra-high I/O**: Supports a maximum throughput of 350 MB/s.                                                                                           |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Storage Space                     | Minimum storage space = Number of shards x 40 GB.                                                                                                        |
      |                                   |                                                                                                                                                          |
      |                                   | Maximum storage space = Number of shards x 16 TB.                                                                                                        |
      |                                   |                                                                                                                                                          |
      |                                   | The storage space must be a multiple of (Number of shards x 40 GB).                                                                                      |
      |                                   |                                                                                                                                                          |
      |                                   | When allocating the storage space, take into consideration the file system overheads for running the databases, such as inodes and reserved blocks.      |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 3** Network

      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                       |
      +===================================+===================================================================================================================================================================================================================================================================================================================================================+
      | VPC                               | The virtual network where your DB instances are located. VPC isolates networks for different workloads. You need to create or select the required Virtual Private Cloud (VPC). For details about how to create a VPC, see "Creating a VPC" in the *Virtual Private Cloud User Guide*.                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                   |
      |                                   | If no VPC is available, GaussDB(openGauss) allocates a default VPC for you.                                                                                                                                                                                                                                                                       |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Subnet                            | A subnet provides dedicated network resources that are logically isolated from other networks for network security. Subnets take effect only within an AZ. DHCP must be enabled by default for subnets in which you plan to create GaussDB(openGauss) DB instances. A private IP address is automatically assigned when you create a DB instance. |
      |                                   |                                                                                                                                                                                                                                                                                                                                                   |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                         |
      |                                   |                                                                                                                                                                                                                                                                                                                                                   |
      |                                   |    By default, a subnet supports a maximum of 256 IP addresses. A distributed DB instance requires a maximum of 1286 IP addresses. You are advised to use a subnet that can provide 2048 IP addresses.                                                                                                                                            |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Security Group                    | Controls the access that traffic has in and out of a GaussDB(openGauss) DB instance. By default, the security group associated with the GaussDB(openGauss) DB instance is authorized.                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                   |
      |                                   | Enhances security by controlling access to GaussDB(openGauss) from other services. When you select a security group, you must ensure that it allows the client to access DB instances.                                                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                                                                                                   |
      |                                   | If no security group is available, GaussDB(openGauss) allocates a default security group for you.                                                                                                                                                                                                                                                 |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 4** Database configuration

      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                |
      +===================================+============================================================================================================================================================================================================================================================================================================================================+
      | Administrator                     | The default login name for the database is **root**.                                                                                                                                                                                                                                                                                       |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Administrator Password            | The new password must consist of 8 to 32 characters and contain at least three of the following character types: uppercase letters, lowercase letters, digits, and special characters (``~!@#%^*-_=+?,``). Enter a strong password and periodically change it to improve security, preventing security risks such as brute force cracking. |
      |                                   |                                                                                                                                                                                                                                                                                                                                            |
      |                                   | Keep your password secure. The system cannot retrieve it.                                                                                                                                                                                                                                                                                  |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Confirm Password                  | Must be the same as **Administrator Password**.                                                                                                                                                                                                                                                                                            |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Database Port                     | Refers to the port number used by the database to provide services for external systems, ranging from 1024 to 39998. The default value is **8000**. The following are not allowed: 2378, 2379, 2380, 4999, 5000, 5999, 6000, 6001, 8097, 8098, 12016, 12017, 20049, 20050, 21731, 21732, 32122, 32123, and 32124.                          |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 5** Parameter template

      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                             |
      +===================================+=========================================================================================================================================================================================================================================================================+
      | Parameter Template                | Contains engine configuration values that can be applied to one or more DB instances. In a distributed DB instance, the primary and standby nodes use the same parameter template. You can modify the instance parameters as required after the DB instance is created. |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Enterprise Project                | If the DB instance has been associated with an enterprise project, select the target project from the **Enterprise Project** drop-down list.                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                         |
      |                                   | You can also go to the enterprise project management console to create a project. For details about how to create a project, see the *ProjectMan User Guide*.                                                                                                           |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 6** Tags

      +-----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter | Description                                                                                                                                                                                    |
      +===========+================================================================================================================================================================================================+
      | Tag       | Tags a DB instance. This configuration is optional. Adding tags to DB instances helps you better identify and manage the DB instances. A maximum of 20 tags can be added for each DB instance. |
      +-----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   After the configuration, click **Price Calculator** to view the price of your DB instance with its current configuration.

   .. note::

      The performance of your GaussDB(openGauss) DB instance depends on its configurations. Hardware configuration items include the instance class, storage type, and storage space.

#. Confirm specifications.

   -  If you need to modify your settings, click **Previous**.
   -  If you do not need to modify your settings, click **Submit**.

#. To view and manage the GaussDB(openGauss) DB instance, go to the **Instance Management** page.

   -  When a GaussDB(openGauss) DB instance is being created, the instance status is **Creating**.
   -  To refresh the instance list, click |image2| in the upper right corner of the list. When the creation process is complete, the instance status will be **Available**.
   -  The database port is **8000** by default.

.. |image1| image:: /_static/images/en-us_image_0000001072358973.png
.. |image2| image:: /_static/images/en-us_image_0000001072121108.png
