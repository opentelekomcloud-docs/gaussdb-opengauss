:original_name: opengauss_01_0018.html

.. _opengauss_01_0018:

Creating a DB Instance
======================

Scenarios
---------

You can create a DB instance on the management console.

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner and select a region and project.

#. Click |image2| in the upper left corner of the page and choose **Databases** > **GaussDB**. The GaussDB console is displayed.

#. On the **Instances** page, click **Create DB Instance**.

#. On the displayed page, configure parameters about the instance, and click **Next**.

   .. table:: **Table 1** Basic information

      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                           |
      +===================================+=======================================================================================================================================================================================================================================================================================================================================================================+
      | Region                            | A region where the tenant is located. You can change the region on the instance creation page, or go back to the **Instances** page and change it in the upper left corner.                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |    Products in different regions cannot communicate with each other over a private network. After the DB instance is created, you cannot change its region.                                                                                                                                                                                                           |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Instance Name                  | The instance name must start with a letter and can contain 4 to 64 characters. Only letters, digits, hyphens (-), and underscores (_) are allowed.                                                                                                                                                                                                                    |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Engine Version                 | Currently, GaussDB 8.103, 3.223, 3.222, 3.208, 3.103, 2.7, 2.3, 1.4, and 1.0 are supported.                                                                                                                                                                                                                                                                           |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Instance Type                  | **Distributed**: You can add nodes for distributed instances as needed to handle large volumes of concurrent requests.                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | **Primary/Standby**: Primary/Standby instances are suitable for scenarios with small and stable volumes of data, where data reliability and service availability are extremely important.                                                                                                                                                                             |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Deployment Model                  | **Independent**: Database components are deployed on different nodes. This model is suitable for where high reliability and stability are required and the instance scale is large.                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | **HA (1 primary + 2 standby)**: 3-node deployment where there is a shard. The shard contains one primary DN and two standby DNs.                                                                                                                                                                                                                                      |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Transaction Consistency           | This parameter is only available for distributed DB instances.                                                                                                                                                                                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | -  **Strong consistency**: When an application updates data, every user can query all data that has been successfully committed, but performance is affected.                                                                                                                                                                                                         |
      |                                   | -  **Eventual consistency**: When an application updates data, the data users queried may be different, and some users may not obtain the most current value. The most current data may take a bit of time to become available for query by all users. However, DB instances with eventual consistency generally have higher performance.                             |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Replicas                          | This parameter is only available for distributed instances. It indicates the number of DNs in a shard. If there are three replicas, there are one primary and two standby DNs in a shard.                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |    To apply for two replicas in the independent deployment, submit an application in the upper right corner of the management console.                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |    The restrictions on two replicas are as follows:                                                                                                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |    -  The DB instance can only be deployed in a single AZ.                                                                                                                                                                                                                                                                                                            |
      |                                   |    -  Some functions need to be fully adapted to the deployment model. Otherwise, compatibility problems may occur.                                                                                                                                                                                                                                                   |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Shards                            | This parameter is only available for distributed instances. It specifies the number of shards in an instance. A shard contains multiple DNs. The number of DNs in a shard depends on the value of **Replicas**, for example, if **Replicas** is set to **3**, there are three DNs (one primary and two standby DNs) in a shard. The number of shards is from 1 to 64. |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Coordinator Nodes                 | This parameter is only available for distributed instances. It indicates the number of CNs. CNs receive access requests from applications, break down and schedule the tasks to DNs under each shard for parallel execution, and then return execution results to clients. The number of CNs is from 1 to 64.                                                         |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | .. important::                                                                                                                                                                                                                                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |    NOTICE:                                                                                                                                                                                                                                                                                                                                                            |
      |                                   |    There should not be more than twice as many CNs as shards.                                                                                                                                                                                                                                                                                                         |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | AZ                                | A DB instance can be deployed in one AZ or three AZs.                                                                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   | An AZ is a physical region where resources have their own independent power supply and networks. AZs are physically isolated but interconnected through an internal network.                                                                                                                                                                                          |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Time Zone                         | You need to select a time zone during instance creation according to the region hosting your DB instance.                                                                                                                                                                                                                                                             |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 2** Specifications and storage

      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                             |
      +===================================+=========================================================================================================================================================+
      | Instance Specifications           | CPU and memory specifications of the instance. Different instance specifications have different numbers of database connections.                        |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Storage Type                      | The storage type determines the read/write speed of an instance. The higher the maximum throughput is, the higher the instance read/write speed can be. |
      |                                   |                                                                                                                                                         |
      |                                   | **Ultra-high I/O**: supports a maximum throughput of 350 MB/s.                                                                                          |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Storage Space (GB)                | The storage space contains the file system overhead required for inodes, reserved blocks, and database operations.                                      |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Disk Encryption                   | -  **Disable**: Encryption is disabled.                                                                                                                 |
      |                                   |                                                                                                                                                         |
      |                                   | -  **Enable**: Encryption is enabled, which improves data security but affects system performance.                                                      |
      |                                   |                                                                                                                                                         |
      |                                   |    If you select **Enable**, **Key Name** indicating the tenant key needs to be specified.                                                              |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 3** Network

      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                                                              |
      +===================================+==========================================================================================================================================================================================================================================================================================================================================================================================================+
      | VPC                               | The virtual network where the GaussDB instance is created. A VPC isolates networks for different workloads. You need to create or select the required VPC.                                                                                                                                                                                                                                               |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                   | If no VPC is available, GaussDB allocates a default VPC for you.                                                                                                                                                                                                                                                                                                                                         |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Subnet                            | A subnet provides dedicated network resources that are logically isolated from other networks for network security. Subnets take effect only within a specific AZ. Dynamic Host Configuration Protocol (DHCP) is enabled by default for subnets in which you plan to create GaussDB instances and cannot be disabled. A private IP address is automatically assigned when you create a GaussDB instance. |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Security Group                    | A security group controls the access that traffic has in and out of a GaussDB instance. By default, the security group associated with the instance is authorized.                                                                                                                                                                                                                                       |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                   | If you need to change the security group when creating a distributed instance, ensure that the TCP ports in the inbound rule include: 40000-60480, 20050, 5000-5001, 2379-2380, 6000, 6500, and *<database_port>* - (*<database_port>* + 100) (for example, if the database port is 8000, the TCP ports must include 8000-8100).                                                                         |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                   | If you want to change the security group when creating a primary/standby instance, ensure that the TCP ports in the inbound rule include: 20050, 5000-5001, 2379-2380, 6000, 6500, and *<database_port>* - (*<database_port>* + 100) (for example, if the database port is 8000, the TCP ports must include 8000-8100).                                                                                  |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                   | The security group enhances security by controlling access to GaussDB from other services. When you select a security group, you must ensure that it allows the client to access your DB instances.                                                                                                                                                                                                      |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                   | If no security group is available, GaussDB allocates a default security group for you.                                                                                                                                                                                                                                                                                                                   |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Database Port                     | The port is used by applications to access the database. Value range: 1024 to 39989. Default value: **8000**. The following ports are used by the system and cannot be used: 2378 to 2380, 2400, 4999 to 5001, 5100, 5500, 5999 to 6001, 6009 to 6010, 6500, 8015, 8097, 8098, 8181, 9090, 9100, 9180, 9187, 9200, 12016, 12017, 20049, 20050, 21731, 21732, 32122 to 32126, and 39001.                  |
      +-----------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 4** Database configuration

      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                |
      +===================================+============================================================================================================================================================+
      | Administrator                     | The default login name for the database is **root**.                                                                                                       |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Administrator Password            | Enter a strong password and periodically change it to improve security, preventing security risks such as brute force cracking.                            |
      |                                   |                                                                                                                                                            |
      |                                   | .. important::                                                                                                                                             |
      |                                   |                                                                                                                                                            |
      |                                   |    NOTICE:                                                                                                                                                 |
      |                                   |    The password must contain:                                                                                                                              |
      |                                   |                                                                                                                                                            |
      |                                   |    -  8 to 32 characters.                                                                                                                                  |
      |                                   |    -  At least three types of the following: uppercase letters, lowercase letters, digits, and special characters. Supported characters: ``~!@#%^*-_=+?,`` |
      |                                   |                                                                                                                                                            |
      |                                   | Keep your password secure because you cannot retrieve it from the system.                                                                                  |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Confirm Password                  | The value must be the same as **Administrator Password**.                                                                                                  |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 5** Parameter templates

      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                          |
      +===================================+======================================================================================================================================================================================================================================+
      | Parameter Template                | A template of parameters for creating an instance. The template contains engine configuration values that are applied to one or more instances. You can modify the instance parameters as required after the DB instance is created. |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Enterprise Project                | If the DB instance has been associated with an enterprise project, select the target project from the **Enterprise Project** drop-down list.                                                                                         |
      |                                   |                                                                                                                                                                                                                                      |
      |                                   | You can also go to the enterprise project management console to create a project.                                                                                                                                                    |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 6** Tags

      +-----------+---------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter | Description                                                                                                                           |
      +===========+=======================================================================================================================================+
      | Tag       | This parameter is optional. Adding tags helps you better identify and manage your DB instances. Each instance can have up to 20 tags. |
      +-----------+---------------------------------------------------------------------------------------------------------------------------------------+

   After the configuration, click **Price Calculator** to view the price of your DB instance with its current configuration.

   .. note::

      The performance of your GaussDB instance depends on its configurations. Hardware items include the instance specifications, storage type, and storage space.

#. Confirm the displayed details.

   Confirm your settings.

   -  If you need to modify your settings, click **Previous**.
   -  If you do not need to modify your settings, click **Submit**.

#. To view and manage the GaussDB instance, go to the **Instances** page.

   -  When a GaussDB instance is being created, the instance status is **Creating**.
   -  To refresh the instance list, click |image3| in the upper right corner of the list. When the creation process is complete, the instance status will be **Available**.
   -  An automated full backup is immediately triggered after an instance is created.
   -  The default database port is 8000. You can change it after a DB instance is created.

.. |image1| image:: /_static/images/en-us_image_0000002088517922.png
.. |image2| image:: /_static/images/en-us_image_0000002124197217.png
.. |image3| image:: /_static/images/en-us_image_0000002124197653.png
